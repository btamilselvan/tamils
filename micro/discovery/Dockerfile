FROM openjdk:11-jre-slim

#As the name suggests, this instruction allows you to expose a certain port to the outside world.
#EXPOSE 8080

# Add a volume pointing to /tmp - Volumes are a mechanism to persist data generated by the container on the Host OS, and share directories from the Host OS with the container.
#VOLUME /tmp/config

# The application's jar file. The ARG instruction defines a variable with a default value. You can override the default value of the variable by passing it at build time.
#ARG JAR_FILE=target/discovery-1.0-SNAPSHOT.jar

# Add the application's jar to the container
#ADD ${JAR_FILE} discovery.jar

#Add d-entry.sh /opt/bin/

#RUN chmod 755 /opt/bin/d-entry.sh

# Run the jar file 
#ENTRYPOINT ["java", "-jar", "-Dspring.profiles.active=aws", "/discovery.jar"]

RUN apt-get update -y

RUN apt-get install wget -y

# The application's jar file. JAR_FILE is an arguement exported during docker build (check the pom.xml)
ARG JAR_FILE

ENV profile dev

# Add the application's jar to the container
ADD ${JAR_FILE} discovery.jar

# Run the jar file 
#ENTRYPOINT ["java", "-jar", "discovery.jar"]

ENTRYPOINT ["java", "-jar", "-Dspring.profiles.active=${profile}", "discovery.jar"]